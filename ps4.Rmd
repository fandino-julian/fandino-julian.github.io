---
title: "Problem set 4"
author: "JULIAN FANDIÑO_202021070"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
# Configuración del entorno
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(pacman)
p_load(rio, data.table, tidyverse, sf, rvest, ggplot2, viridis, rmarkdown)
```


```{r, eval=TRUE, echo=TRUE, message=FALSE, results='hide'}
# Extracción de URLs de la página web
url <- "https://eduard-martinez.github.io/pset-4.html"
webpage <- read_html(url)
url_full <- webpage %>% html_nodes("a") %>% html_attr("href") %>% na.omit() %>% unique()

# Filtrar URLs que contienen la palabra "propiedad"
url_subset <- url_full[grepl("propiedad", url_full)]
url_subset
```

```{r,eval=TRUE,echo=TRUE,message=FALSE}
# Extracción de las tablas de las URLs filtradas
lista_tablas <- lapply(url_subset, function(link) {
  page <- read_html(link)
  table <- page %>% html_table(fill = TRUE) %>% .[[1]]
  return(table)
})
